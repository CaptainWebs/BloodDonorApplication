<% include partials/header%>

<% var count=0;%>
<% users.forEach(function(user){%>

<%    count++; %>

<% })%>

<div class="row" style="padding-top:100px;background:#B02428;color:white;padding-bottom:10px;">
    <div class="col-md-10 col-md-offset-1">
        <h2>Search Results</h2>
        <p>
            <% if(count==0){%>
            
            No result is found.
            
           <% }else if(count == 1){ %>
            
            1 result is found.
            
           <% }else{ %>
            
         <%= count%> results are found.
         
         <% } %>
        </p>
          <button class="btn btn-primary" type="button" id="toggle" onclick="toggle()" style="background:#2e3436;outline:none;border:none;"><i class="far fa-edit"></i> Modify Search</button>
    </div>
  </div>
  
  <div class="row hidden" style="padding-top:10px;background:#2e3436;color:white;padding-bottom:10px;display:block" id="data">
    <div class="col-md-10 col-md-offset-1" style="padding-top:10px;background:#2e3436;color:white;margin-bottom:20px;">
        <h4 style="float:left;">Modify Search</h4>
        <button class="btn btn-primary" type="button" id="toggle" onclick="toggle2()" style="float:right;background:#b02528;border:0;outline:none;"><i class="far fa-window-close"></i> Close</button>

        <form class="px-4 py-3" action="/results" method="GET">
                              <div class="form-row">
                                  <div class="form-group col-md-12"
                                      <label for="exampleDropdownFormEmail1" style="color:white;"> Select the Blood Type</label>
                                      <select class="selectpicker" name="bloodType" data-style="btn-info" multiple data-max-options="1" data-live-search="true" required>
                     
                                          <optgroup label="A group">
                                           
                                          <option>A+ (A Rhd positive)</option>
                                           
                                          <option>A- (A Rhd negative)</option>
                                           
                                          </optgroup>
                                           
                                          <optgroup label="B group">
                                           
                                          <option>B+ (B Rhd positive)</option>
                                           
                                          <option>B- (B Rhd negative)</option>
                    
                                          </optgroup>
                                          <optgroup label="AB group">
                                           
                                          <option>AB+ (AB Rhd positive)</option>
                                           
                                          <option>AB- (AB Rhd negative)</option>
                    
                                          </optgroup>
                                          <optgroup label="O group">
                                           
                                          <option>O+ (O Rhd positive)</option>
                                           
                                          <option>O- (O Rhd negative)</option>
                    
                                          </optgroup>
                                           
                                          </select>
                                      </div>
                              </div>
                              
                            <div class="form-row">
                      
                              <div class="form-group col-md-6">
                                <select name="country" class="countries" style="width:100%;height:40px;color:gray;" id="countryId" required>
                                    <option value="">Please Select Country</option>
                                </select>
                              </div>  
                              <div class="form-group col-md-6">
                                <input type="text" style="width:100%;height:40px;color:gray;" class="form-control" name="city" id="exampleDropdownFormEmail1" placeholder="City" required>
                              </div>
                            </div>
                            <div class="form-row">
                              <div class="form-group col-md-6">
                                 <input type="text" style="width:100%; height:40px;color:gray;" class="form-control" name="postcode" id="exampleDropdownFormEmail1" placeholder="Postcode">   
                              </div>
                              
                            <div class="form-group col-md-6">
                              <button class="btn-full-search" style="background:#b02428;color:white;" value="Search" type="submit"><i class="fa fa-search" aria-hidden="true"></i> Search</button>
                            </div>
                              
                            </div>
                            
                          </form>
   
    </div>
  </div>

<% users.forEach(function(user){%>    

<div class="row donorsearch" style="padding:20px;">
    <div class="col-md-10 col-md-offset-1">
        <div class="row">
            <!--Profile image-->
            <div class="col-md-2 col-md-offset-1">
              <image src="/images/<%=user.gender%>.png" style="height:150px; width:150px; border-radius:20px;display:block;margin:0 auto;">
            </div>
            
            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-5">
                        <p><i class="fa fa-user-circle redicon"></i> <%= user.firstName%> <%= user.lastName%><br>
                        <i class="fa fa-at redicon"></i> <%= user.username%></p>
                    </div>
                    <div class="col-md-4">
                        <p><i class="fa fa-map-marker redicon"></i> <%= user.country%>, <%= user.city%></p>
                    </div>
                    <div class="col-md-3">
                        <p><i class="fas fa-tint redicon"></i> Blood Type: <br><span style="color:#B02428;font-weight:strong;"><%= user.bloodType%></span></p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-2">
                <form action="/profile/<%=user.username%>" method="GET"><button type="submit" class="btn btn-default" style="border:0;background:#2E3436;color:white;">View Profile</button></form>
                <button class="btn btn-primary" style="margin-top:10px;background:#B02428;border:0;">Send Email</button>
            </div>
        </div>
    
    </div>
</div>    


<% }); %>

<script>
    function toggle(){
      document.getElementById('data').removeAttribute('class', 'hidden');
   
    }
    
    function toggle2(){
      document.getElementById('data').setAttribute("class", 'hidden');
   
    }
    
</script>

<% include partials/footer%>