<% include partials/header%>
<script type="text/javascript">
  var geocoder;
  var map;
  var address ="<%=currentUser.city%>, <%=currentUser.postcode%>, <%=currentUser.country%>";
  function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var myOptions = {
      zoom: 16,
      center: latlng,
    mapTypeControl: true,
    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
    navigationControl: true,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    if (geocoder) {
      geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
          if (status != google.maps.GeocoderStatus.ZERO_RESULTS) {
          map.setCenter(results[0].geometry.location);

            var infowindow = new google.maps.InfoWindow(
                { content: '<b>'+address+'</b>',
                  size: new google.maps.Size(150,50)
                });

            var marker = new google.maps.Marker({
                position: results[0].geometry.location,
                map: map, 
                title:address
            }); 
            google.maps.event.addListener(marker, 'click', function() {
                infowindow.open(map,marker);
            });

          } else {
            alert("No results found");
          }
        } else {
          alert("Geocode was not successful for the following reason: " + status);
        }
      });
    }
  }
</script>
<div class="container" style="margin-top:80px;width:100%;height:400px;">
    <div class="row" style="padding:10px;">
        
        <% var typeOfBlood; %>
            <% if((currentUser.bloodType).slice(0,3) == "A+ "){%>
            
            <% typeOfBlood = "apos"; %>
            
            <% } else if((currentUser.bloodType).slice(0,3) == "B+ "){%>
            
            <% typeOfBlood = "bpos"; %>
            
            <% } else if((currentUser.bloodType).slice(0,3) == "AB+"){ %>
    
            <% typeOfBlood = "abpos"; %>
            
            <% } else if((currentUser.bloodType).slice(0,3) == "O+ "){ %>
            
            <% typeOfBlood = "opos"; %>
            
            <% }else if((currentUser.bloodType).slice(0,3) == "A- "){ %>
            
            <% typeOfBlood = "aneg"; %>
        
            <% }else if((currentUser.bloodType).slice(0,3) == "B- "){%>
            
            <% typeOfBlood = "bneg"; %>
            
            <% }else if((currentUser.bloodType).slice(0,3) == "O- "){%>
            
            <% typeOfBlood = "oneg"; %>
            
            <% }else{ %>
            
            <% typeOfBlood = "abneg"; %>
            
            <% } %>
        <div class="col-md-10 col-md-offset-1 profile_tab">
        <div class="col-md-2" style="margin-top:20px;">
            
            <!--User profile image (set to default image that can be replaced by uploading a new image)-->
            <image src="images/manuser.png" style="height:150px; width:150px; border-radius:20px;display:block;margin:0 auto;">
            <a href="#">Change Profile image</a>    
                
            <!--Username-->
            <h6 class="redicon">@<%= currentUser.username%></h6>
            
            <!--Buttons-->
            <!--Send request button-->
            <button type="button" class="btn btn-primary profilebtn1 requestFriend"><i class="fa fa-plus" aria-hidden="true"></i> Send Request</button>
            
            
            <!--Friends buttton that allow to Unfriend while hovering over-->
            <button type="button" class="btn btn-primary profilebtn1 friend"><i class="fa fa-check" aria-hidden="true"></i> Friend</button>
            
            <!--Report user button-->
            <button type="button" class="btn btn-primary profilebtn1 reportUser"><i class="fa fa-flag-o" aria-hidden="true"></i> Report User</button>
            
        </div>
        <div class="col-md-6">
            <div class="row">
                <div class="col-md-8 col-md-offset-2">
                    <h2><%= currentUser.firstName.toUpperCase()%> <%= currentUser.lastName.toUpperCase()%></h2>
                    
                    <hr>
                     <h4><i class="fa fa-calendar redicon" aria-hidden="true"></i> Date of Birth: <span style="font-weight:700;"> <%= currentUser.dob.toDateString() %></span></h4>
                     <h4><i class="fa fa-venus-mars redicon" aria-hidden="true"></i> Gender: <span style="font-weight:700;"> Male</span></h4>
                     <h4><i class="fa fa-heartbeat redicon" aria-hidden="true"></i> Blood Type: <span style="font-weight:700;"> <%= currentUser.bloodType %></span></h4>
                     <h4><i class="fa fa-clock-o redicon" aria-hidden="true"></i> Last Donation Date: <span style="font-weight:700;"> 16 Jan 2017</span></h4>
                     <hr>
                     <div class="row">
                         <div class="col-md-4">
                             <image src="images/trophy.png" style="height:50px; width:50px;display:block;margin:0 auto;">
                         </div>
                         
                         <div class="col-md-4">
                             <image src="images/blood<%=typeOfBlood%>.png" style="height:50px; width:50px;display:block;margin: 0 auto;" alt="Blood B Positive">
                         </div>
                         <div class="col-md-4">
                             <image src="images/quality.png" style="height:50px; width:50px;display:block;margin:0 auto;">
                         </div>
                     </div>
                     
                    
                    
    
                </div>
            </div>
        </div>
        <div class="col-md-4" style="height:160px;padding:20px;">
            <h4><i class="fa fa-map-marker redicon" aria-hidden="true"></i> Location: <span style="font-weight:700;"><%=currentUser.city%>, <%=currentUser.postcode%>, <%=currentUser.country%></span></h4>
            <div id="map_canvas" style="width:100%; height:200px"></div>
            <div class="row">
                <div class="col-md-6">
                   <button class="btn btn-primary btn-email" style="display:block;">
                       <i class="fa fa-envelope" aria-hidden="true"></i>
                   <a href="mailto:<%=currentUser.email%>" style="color:white;text-decoration:none;"> Send Email</a></button>   
                </div>
                <div class="col-md-6">
                   <button class="btn btn-primary btn-phone">
                       <i class="fa fa-phone" aria-hidden="true"></i>
                   <a href="callTo:<%=currentUser.phoneNumber%>" style="color:white;text-decoration:none;">Call Phone</button></a>
                </div>
            </div>
        </div>
       </div>
    </div>
    <hr>
    <div class="row" style="padding:10px;color:white;">
      <div class="col-md-10 col-md-offset-1">
         <div class="row">
             <div class="col-md-4">
             <div class="row" style="height:30px;width:100%;background:#2d3436;line-height:30px;text-align:center;font-size:16px;">
                 <div class="col-md-10 col-md-offset-1">
                     <i class="fa fa-users" aria-hidden="true"></i> Friends
                 </div>
             </div>  
             <p style="color:black;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus convallis egestas nibh, vel ullamcorper risus
             dignissim et. Praesent at tincidunt nibh.</p>
                 
             </div>
             <div class="col-md-4">
                 <div class="row" style="height:30px;width:100%;background:#2d3436;line-height:30px;text-align:center;font-size:16px;">
                 <div class="col-md-10 col-md-offset-1">
                   <i class="fa fa-sticky-note-o" aria-hidden="true"></i> Activity
                 </div>
             </div> 
              <p style="color:black;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus convallis egestas nibh, vel ullamcorper risus
             dignissim et. Praesent at tincidunt nibh.</p>
             </div>
             <div class="col-md-4">
                 <div class="row" style="height:30px;width:100%;background:#2d3436;line-height:30px;text-align:center;font-size:16px;">
                 <div class="col-md-10 col-md-offset-1">
                   <i class="fa fa-heart" aria-hidden="true"></i> Donations
                 </div>
             </div> 
             <p style="color:black;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus convallis egestas nibh, vel ullamcorper risus
             dignissim et. Praesent at tincidunt nibh.</p>
             </div>
         </div>
      </div>
    </div>
</div>

<% include partials/footer%>


